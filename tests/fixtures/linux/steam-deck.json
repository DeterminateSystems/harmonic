{
  "version": "0.0.2-unreleased",
  "actions": [
    {
      "action": {
        "action": "create_directory",
        "path": "/home/nix",
        "user": null,
        "group": null,
        "mode": 493,
        "force_prune_on_revert": true
      },
      "state": "Uncompleted"
    },
    {
      "action": {
        "action": "create_file",
        "path": "/etc/systemd/system/nix-directory.service",
        "user": null,
        "group": null,
        "mode": 420,
        "buf": "[Unit]\nDescription=Create a `/nix` directory to be used for bind mounting\nPropagatesStopTo=nix-daemon.service\nPropagatesStopTo=nix.mount\nDefaultDependencies=no\nAfter=grub-recordfail.service\nAfter=steamos-finish-oobe-migration.service\n\n[Service]\nType=oneshot\nExecStart=steamos-readonly disable\nExecStart=mkdir -vp /nix\nExecStart=chmod -v 0755 /nix\nExecStart=chown -v root /nix\nExecStart=chgrp -v root /nix\nExecStart=steamos-readonly enable\nExecStop=steamos-readonly disable\nExecStop=rmdir /nix\nExecStop=steamos-readonly enable\nRemainAfterExit=true\n",
        "force": false
      },
      "state": "Uncompleted"
    },
    {
      "action": {
        "action": "create_file",
        "path": "/etc/systemd/system/nix.mount",
        "user": null,
        "group": null,
        "mode": 420,
        "buf": "[Unit]\nDescription=Mount `/home/nix` on `/nix`\nPropagatesStopTo=nix-daemon.service\nPropagatesStopTo=nix-directory.service\nAfter=nix-directory.service\nRequires=nix-directory.service\nConditionPathIsDirectory=/nix\nDefaultDependencies=no\n\n[Mount]\nWhat=/home/nix\nWhere=/nix\nType=none\nDirectoryMode=0755\nOptions=bind\n",
        "force": false
      },
      "state": "Uncompleted"
    },
    {
      "action": {
        "action": "create_file",
        "path": "/etc/systemd/system/ensure-symlinked-units-resolve.service",
        "user": null,
        "group": null,
        "mode": 420,
        "buf": "[Unit]\nDescription=Ensure Nix related units which are symlinked resolve\nAfter=nix.mount\nRequires=nix-directory.service\nRequires=nix.mount\nPropagatesStopTo=nix-directory.service\nPropagatesStopTo=nix.mount\nDefaultDependencies=no\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nExecStart=/usr/bin/systemctl daemon-reload\nExecStart=/usr/bin/systemctl restart --no-block sockets.target timers.target multi-user.target\n\n[Install]\nWantedBy=sysinit.target\n",
        "force": false
      },
      "state": "Uncompleted"
    },
    {
      "action": {
        "action": "start_systemd_unit",
        "unit": "ensure-symlinked-units-resolve.service"
      },
      "state": "Uncompleted"
    },
    {
      "action": {
        "action": "provision_nix",
        "fetch_nix": {
          "action": {
            "url": "https://releases.nixos.org/nix/nix-2.12.0/nix-2.12.0-x86_64-linux.tar.xz",
            "dest": "/nix/temp-install-dir"
          },
          "state": "Uncompleted"
        },
        "create_group": {
          "action": {
            "name": "nixbld",
            "gid": 3000
          },
          "state": "Uncompleted"
        },
        "create_nix_tree": {
          "action": {
            "create_directories": [
              {
                "action": {
                  "path": "/nix/var",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "force_prune_on_revert": false
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/nix/var/log",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "force_prune_on_revert": false
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/nix/var/log/nix",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "force_prune_on_revert": false
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/nix/var/log/nix/drvs",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "force_prune_on_revert": false
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/nix/var/nix",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "force_prune_on_revert": false
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/nix/var/nix/db",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "force_prune_on_revert": false
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/nix/var/nix/gcroots",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "force_prune_on_revert": false
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/nix/var/nix/gcroots/per-user",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "force_prune_on_revert": false
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/nix/var/nix/profiles",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "force_prune_on_revert": false
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/nix/var/nix/profiles/per-user",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "force_prune_on_revert": false
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/nix/var/nix/temproots",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "force_prune_on_revert": false
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/nix/var/nix/userpool",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "force_prune_on_revert": false
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/nix/var/nix/daemon-socket",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "force_prune_on_revert": false
                },
                "state": "Uncompleted"
              }
            ]
          },
          "state": "Uncompleted"
        },
        "move_unpacked_nix": {
          "action": {
            "src": "/nix/temp-install-dir"
          },
          "state": "Uncompleted"
        }
      },
      "state": "Uncompleted"
    },
    {
      "action": {
        "action": "configure_nix",
        "setup_default_profile": {
          "action": {
            "channels": [
              "nixpkgs"
            ]
          },
          "state": "Uncompleted"
        },
        "configure_shell_profile": {
          "action": {
            "create_directories": [
              {
                "action": {
                  "path": "/etc/fish/conf.d",
                  "user": null,
                  "group": null,
                  "mode": 420,
                  "force_prune_on_revert": false
                },
                "state": "Skipped"
              }
            ],
            "create_or_insert_into_files": [
              {
                "action": {
                  "path": "/etc/bashrc",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "buf": "\n# Nix\nif [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then\n    . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'\nfi\n# End Nix\n\n        \n",
                  "position": "Beginning"
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/etc/profile.d/nix.sh",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "buf": "\n# Nix\nif [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then\n    . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'\nfi\n# End Nix\n\n        \n",
                  "position": "Beginning"
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/etc/zshenv",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "buf": "\n# Nix\nif [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then\n    . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'\nfi\n# End Nix\n\n        \n",
                  "position": "Beginning"
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/etc/bash.bashrc",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "buf": "\n# Nix\nif [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then\n    . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'\nfi\n# End Nix\n\n        \n",
                  "position": "Beginning"
                },
                "state": "Uncompleted"
              },
              {
                "action": {
                  "path": "/etc/fish/conf.d/nix.fish",
                  "user": null,
                  "group": null,
                  "mode": 493,
                  "buf": "\n# Nix\nif test -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.fish'\n    . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.fish'\nend\n# End Nix\n\n",
                  "position": "Beginning"
                },
                "state": "Uncompleted"
              }
            ]
          },
          "state": "Uncompleted"
        },
        "place_channel_configuration": {
          "action": {
            "channels": [
              [
                "nixpkgs",
                "https://nixos.org/channels/nixpkgs-unstable"
              ]
            ],
            "create_file": {
              "action": {
                "path": "/home/ana/.nix-channels",
                "user": null,
                "group": null,
                "mode": 436,
                "buf": "https://nixos.org/channels/nixpkgs-unstable nixpkgs",
                "force": false
              },
              "state": "Uncompleted"
            }
          },
          "state": "Uncompleted"
        },
        "place_nix_configuration": {
          "action": {
            "create_directory": {
              "action": {
                "path": "/etc/nix",
                "user": null,
                "group": null,
                "mode": 493,
                "force_prune_on_revert": false
              },
              "state": "Uncompleted"
            },
            "create_file": {
              "action": {
                "path": "/etc/nix/nix.conf",
                "user": null,
                "group": null,
                "mode": 436,
                "buf": "# Generated by https://github.com/DeterminateSystems/nix-installer, version 0.0.2-unreleased.\n\n\n\nexperimental-features = nix-command flakes auto-allocate-uids\n\nauto-optimise-store = true\n\nauto-allocate-uids = true\n\nbash-prompt-prefix = (nix:$name)\\040\n",
                "force": false
              },
              "state": "Uncompleted"
            }
          },
          "state": "Uncompleted"
        },
        "configure_nix_daemon_service": {
          "action": {},
          "state": "Uncompleted"
        }
      },
      "state": "Uncompleted"
    }
  ],
  "planner": {
    "planner": "steam-deck",
    "persistence": "/home/nix",
    "settings": {
      "channels": [
        [
          "nixpkgs",
          "https://nixos.org/channels/nixpkgs-unstable"
        ]
      ],
      "modify_profile": true,
      "nix_build_group_name": "nixbld",
      "nix_build_group_id": 3000,
      "nix_package_url": "https://releases.nixos.org/nix/nix-2.12.0/nix-2.12.0-x86_64-linux.tar.xz",
      "extra_conf": [],
      "force": false
    }
  }
}